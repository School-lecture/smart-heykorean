<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

            <!-- Bootstrap CSS -->
            <link rel="stylesheet" href="../index/css/bootstrap.min.css">

            <!-- Style -->
            <link rel="stylesheet" href="../index/css/header.css">
            <link rel="stylesheet" href="../index/css/main.css">

            <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">

            <!-- chart.js-->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
</head>

<body>
    <header id="header">
        <nav id="main-nav" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand" href="index.html"><img src="images/logo.png" alt="logo"></a>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        <li class="scroll active">
                            <a href="#">MYPAGE</a>
                        </li>
                        <li class="scroll active">
                            <a href="#">LOGOUT</a>
                        </li>
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->


    <div class="wrapper">
        <section id="our-team">
            <div class="section-header">
                <h2 class="section-title wow fadeInDown">
                    노래를 선택하세요
                </h2>
                <P>감정분석이 필요한 노래를 선택해주세요</P>


                <!-- 모달창 -->
                <div id="my_modal">
                    <table class="table custom-table">
                        <thead>
                            <tr>
                                <th scope="col"></th>
                                <th scope="col"></th>
                                <th scope="col">가수</th>
                                <th scope="col">노래</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr scope="row">
                                <th scope="row">
                                    <label class="control control--checkbox">
                                        <input type="checkbox" name="song" onclick='checkOnlyOne(this)'/>
                                        <div class="control__indicator"></div>
                                    </label>
                                </th>
                                <td>1</td>
                                <td>James Yates</td>
                                <td>
                                    Web Designer
                                    <small class="d-block">Far far away</small>
                                </td>
                            </tr>

                            <tr class="spacer">
                                <td colspan="100"></td>
                            </tr>
                                <th scope="row">
                                    <label class="control control--checkbox">
                                        <input type="checkbox" name="song" onclick='checkOnlyOne(this)'/>
                                        <div class="control__indicator"></div>
                                    </label>
                                </th>
                                <td>2</td>
                                <td>Matthew Wasil</td>
                                <td>
                                    Graphic Designer
                                    <small class="d-block">Far far away</small>
                                </td>

                                <tr class="spacer">
                                    <td colspan="100"></td>
                                </tr>
                                <tr>
                                    <th scope="row">
                                        <label class="control control--checkbox">
                                            <input type="checkbox" name="song" onclick='checkOnlyOne(this)'/>
                                            <div class="control__indicator"></div>
                                        </label>
                                    </th>
                                    <td>3</td>
                                    <td>Sampson</td>
                                    <td>
                                        Mobile Dev
                                        <small class="d-block">Far far away, behind the word mountains</small>
                                    </td>
                                </tr>

                            </table>
                            <button type="submit">선택</button>
                            <a class="modal_close_btn">닫기</a>
                        </div>
                        <!-- 모달창 -->
                    </div>
                </section>



                    <!-- 노래매칭 -->
                <div class="modal_btn">
                    <button id ="popup_open_btn">노래선택</button>
                </div>

                <main>      
            <div class="matching_song">
                <button id="matching" type="submit"> 매칭 </button>
                    <div id="box1">
                        <img src="images/IU.jpg" alt="선택한노래" width="300" height="300">
                        <p>가수</p>
                        <p>제목</p>
                    </div>
                    <div id="box2">
                        <img src="images/ANN.jpg" alt="결과노래" width="300" height="300">
                        <p>가수</p>
                        <p>제목</p>
                    </div>
            </div>
                </main>

                    <div class="chart">
                        <div class="section-header">
                            <h2 class="section-title wow fadeInDown">감정분석결과</h2>
                    
                            <!--차트-->
                            <canvas id="radar-chart" width="700" height="500"></canvas>
                            <script>
                            new Chart(document.getElementById("radar-chart"), {
                                type: 'radar',
                                data: {
                                  labels: ["행복", "사랑", "우울", "애증", "신남"],
                                  datasets: [
                                    {
                                      label: "선택 곡",
                                      fill: true,
                                      backgroundColor: "rgba(179,181,198,0.2)",
                                      borderColor: "rgba(179,181,198,1)",
                                      pointBorderColor: "#FF3232",
                                      pointBackgroundColor: "rgba(179,181,198,1)",
                                      data: [8.77,55.61,21.69,6.62,6.82]
                                    }, {
                                      label: "추천 곡",
                                      fill: true,
                                      backgroundColor: "rgba(255,99,132,0.2)",
                                      borderColor: "rgba(255,99,132,1)",
                                      pointBorderColor: "#8AE634",
                                      pointBackgroundColor: "rgba(255,99,132,1)",
                                      data: [25.48,54.16,7.61,8.06,4.45]
                                    }
                                  ]
                                },
                                options: {
                                    responsive: false,
                                        maintainAspectRatio: false,
                                  title: {
                                    display: true 
                                  }
                                }
                            });
                            
                            
                            
                            </script>
                            

                    <script>
                        function modal(id) {
                            var zIndex = 9999;
                            var modal = document.getElementById(id);

                            // 모달 div 뒤에 레이어
                            var bg = document.createElement('div');
                            bg.setStyle({
                                position: 'fixed',
                                zIndex: zIndex,
                                left: '0px',
                                top: '0px',
                                width: '100%',
                                height: '100%',
                                overflow: 'auto',
                                // 레이어 색은 여기서 바꾸면 됨
                                backgroundColor: 'rgba(0,0,0,0.4)'
                            });
                            document
                                .body
                                .append(bg);

                            // 닫기 버튼 처리, 레이어와 모달 div 지우기
                            modal
                                .querySelector('.modal_close_btn')
                                .addEventListener('click', function () {
                                    bg.remove();
                                    modal.style.display = 'none';
                                });

                            modal.setStyle({
                                position: 'fixed', display: 'block', boxShadow: '0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)',

                                // 시꺼먼 레이어 보다 한칸 위에 보이기
                                zIndex: zIndex + 1,

                                // div center 정렬
                                top: '50%',
                                left: '50%',
                                transform: 'translate(-50%, -50%)',
                                msTransform: 'translate(-50%, -50%)',
                                webkitTransform: 'translate(-50%, -50%)'
                            });
                        }

                        // Element 에 style 한번에 오브젝트로 설정하는 함수 추가
                        Element.prototype.setStyle = function (styles) {
                            for (var k in styles) 
                                this.style[k] = styles[k];
                            return this;
                        };

                        document
                            .getElementById('popup_open_btn')
                            .addEventListener('click', function () {
                                // 모달창 띄우기
                                modal('my_modal');
                            });

                        // checkbox 중복방지
                        function checkOnlyOne(element) {
                            const checkboxes = document.getElementsByName("song");
                            checkboxes.forEach((cb) => {
                                cb.checked = false;
                            })
                            element.checked = true;
                        }

                        
                    </script>
                    

                   

                    


</body>
</html>